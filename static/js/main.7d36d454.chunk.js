(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{51:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var s=c(3),n=c.n(s),i=c(35),a=c.n(i),r=(c(51),c(10)),d=c(38),o=c(11),j=c(29),l=c.n(j),u=c(36),b=c(4);c(62);c(54);var h=b.a.initializeApp({apiKey:"AIzaSyCCuBjiI_7QwcbeFpgB4W1VzZgq8Vm7YdY",authDomain:"twitter-clone-7230a.firebaseapp.com",projectId:"twitter-clone-7230a",storageBucket:"twitter-clone-7230a.appspot.com",messagingSenderId:"568864652282",appId:"1:568864652282:web:6727efaaddee7e31f24243"}),x=b.a.auth(),O=b.a.firestore(h),m=O.collection("tweets"),f=(O.collection("comments"),function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.a.auth.GoogleAuthProvider,x.useDeviceLanguage(),e.prev=2,e.next=5,x.signInWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}()),p=c(2),w=n.a.createContext(),v=function(e){var t=e.children,c=Object(s.useState)((function(){return x.currentUser})),n=Object(o.a)(c,2),i=n[0],a=n[1],r=x.onAuthStateChanged((function(e){a(e||null)}));return Object(p.jsx)(w.Provider,{value:{handleSignIn:function(){f()},unsuscribe:r,user:i,firebaseTweets:m},children:t})},g=c(6),N=function(){var e=Object(s.useContext)(w),t=e.handleSignIn,c=e.unsuscribe,n=e.user,i=Object(g.f)();return Object(s.useEffect)((function(){n&&i.push("/"),c()})),Object(p.jsxs)("div",{className:"login",children:[Object(p.jsxs)("div",{className:"login-wrapper",children:[Object(p.jsx)("div",{className:"login-left",children:Object(p.jsx)(r.e,{})}),Object(p.jsxs)("div",{className:"login-right",children:[Object(p.jsx)(r.e,{}),Object(p.jsx)("h1",{children:"Lo que est\xe1 pasando ahora"}),Object(p.jsx)("h3",{children:"\xdanete a Twitter hoy mismo."}),Object(p.jsx)("div",{className:"login-register",children:Object(p.jsxs)("div",{className:"login-button",onClick:t,children:[Object(p.jsx)(d.a,{}),"Registrarse con Google"]})}),Object(p.jsxs)("p",{children:["Al registrarte, aceptas los ",Object(p.jsx)("span",{children:"T\xe9rminos de servicio"})," y la ",Object(p.jsx)("span",{children:"Pol\xedtica de privacidad"}),", incluida la pol\xedtica de ",Object(p.jsx)("span",{children:"Uso de Cookies"}),"."]}),Object(p.jsxs)("p",{children:["\xbfYa tienes una cuenta? ",Object(p.jsx)("span",{children:"Inicia sesi\xf3n"})]})]})]}),Object(p.jsxs)("footer",{className:"login-footer",children:[Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"Acerca de "}),Object(p.jsx)("li",{children:"Centro de ayuda"}),Object(p.jsx)("li",{children:"Condiciones de Servicio"}),Object(p.jsx)("li",{children:"Pol\xedtica de Privacidad"}),Object(p.jsx)("li",{children:"Pol\xedtica de cookies"}),Object(p.jsx)("li",{children:"Informaci\xf3n de anuncios"}),Object(p.jsx)("li",{children:"Blog"}),Object(p.jsx)("li",{children:"Estado"}),Object(p.jsx)("li",{children:"Empleos"}),Object(p.jsx)("li",{children:"Recursos para marcas"}),Object(p.jsx)("li",{children:"Publicidad"}),Object(p.jsx)("li",{children:"Marketing"}),Object(p.jsx)("li",{children:"Twitter para empresas"}),Object(p.jsx)("li",{children:"Desarrolladores"}),Object(p.jsx)("li",{children:"Gu\xeda"}),Object(p.jsx)("li",{children:"Configuraci\xf3n"})]}),Object(p.jsx)("span",{children:"\xa9 2021 Twitter, Inc."})]})]})},k=c(17),C=c(33),S=n.a.createContext(),L=function(e){var t=e.children,c=Object(s.useState)(""),n=Object(o.a)(c,2),i=n[0],a=n[1],r=Object(s.useState)([]),d=Object(o.a)(r,2),j=d[0],l=d[1],u=Object(g.f)();return Object(p.jsx)(S.Provider,{value:{tweet:i,tweets:j,getAllTweets:function(){m.orderBy("createdAt").onSnapshot((function(e){var t=e.docs.map((function(e){return{data:e.data(),id:e.id}}));l(t)}))},setTweet:a,handleSendTweet:function(e,t){e.preventDefault();var c={text:i,createdAt:new Date,uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,likes:0,usersLiked:[],retweets:0,usersRetweeted:[]};return a(""),m.add(c)},useIsLiked:function(e,t,c){var n=Object(s.useState)(!1),i=Object(o.a)(n,2),a=i[0],r=i[1];return Object(s.useEffect)((function(){e&&(void 0!==c?m.doc(t).collection("comments").onSnapshot((function(t){t.forEach((function(t){t.id===c&&(t.data().usersLiked.find((function(t){return t===e.uid}))?r(!0):r(!1))}))})):m.onSnapshot((function(c){c.forEach((function(c){c.id===t&&(c.data().usersLiked.find((function(t){return t===e.uid}))?r(!0):r(!1))}))})))})),a},handleSendComment:function(e,t,c){e.preventDefault();var s={id:c,text:i,createdAt:new Date,uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,likes:0,usersLiked:[],retweets:0,usersRetweeted:[]};m.doc(c).collection("comments").add(s),a(""),u.push("/tweet/".concat(c))},handleLike:function(e,t,c,s){console.log(s),void 0!==s?m.doc(t).collection("comments").get().then((function(n){n.forEach((function(n){var i=m.doc(t).collection("comments").doc(s);n.id===s&&(i=e?i.update({likes:n.data().likes-1,usersLiked:n.data().usersLiked.filter((function(e){return e!==c.uid}))}):i.update({likes:n.data().likes+1,usersLiked:[].concat(Object(C.a)(n.data().usersLiked),[c.uid])})).then((function(){console.log("actualizado")}))}))})):m.get().then((function(s){s.forEach((function(s){if(s.id===t){var n=m.doc(s.id);(n=e?n.update({likes:s.data().likes-1,usersLiked:s.data().usersLiked.filter((function(e){return e!==c.uid}))}):n.update({likes:s.data().likes+1,usersLiked:[].concat(Object(C.a)(s.data().usersLiked),[c.uid])})).then((function(){console.log("actualizado")}))}}))}))}},children:t})},y=c(16),T=c(22),I=c(25),M=c(41),E=c(39),R=c(40),A=c(26),P=[{icon:Object(p.jsx)(r.e,{}),href:"/"},{icon:Object(p.jsx)(T.b,{}),text:"Inicio",href:"/"},{icon:Object(p.jsx)(T.a,{}),text:"Explorar"},{icon:Object(p.jsx)(I.a,{}),text:"Notificaciones"},{icon:Object(p.jsx)(E.a,{}),text:"Mensajes"},{icon:Object(p.jsx)("svg",{viewBox:"0 0 24 24",height:"25px",children:Object(p.jsx)("g",{children:Object(p.jsx)("path",{fill:"#FFF",d:"M19.9 23.5c-.157 0-.312-.05-.442-.144L12 17.928l-7.458 5.43c-.228.164-.53.19-.782.06-.25-.127-.41-.385-.41-.667V5.6c0-1.24 1.01-2.25 2.25-2.25h12.798c1.24 0 2.25 1.01 2.25 2.25v17.15c0 .282-.158.54-.41.668-.106.055-.223.082-.34.082zM12 16.25c.155 0 .31.048.44.144l6.71 4.883V5.6c0-.412-.337-.75-.75-.75H5.6c-.413 0-.75.338-.75.75v15.677l6.71-4.883c.13-.096.285-.144.44-.144z"})})}),text:"Guardados"},{icon:Object(p.jsx)(R.a,{}),text:"Listas"},{icon:Object(p.jsx)(M.a,{}),text:"Perfil"},{icon:Object(p.jsx)(A.b,{}),text:"Salir"}],U=function(){var e=Object(s.useContext)(w).user;return Object(p.jsx)("div",{className:"aside-container",children:Object(p.jsxs)("div",{className:"aside",children:[Object(p.jsx)("ul",{children:P.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsxs)(k.b,{to:e.href?e.href:"#",children:[e.icon,Object(p.jsx)("span",{children:e.text})]})})}))}),Object(p.jsxs)("div",{className:"aside-profile",children:[Object(p.jsxs)("div",{className:"aside-profile-info",children:[Object(p.jsx)("img",{src:e&&e.photoURL,alt:"",height:"48px",width:"48px"}),Object(p.jsxs)("div",{className:"aside-profile-info-name",children:[Object(p.jsx)("h4",{children:e&&e.displayName}),Object(p.jsx)("span",{children:"@".concat(e&&e.uid)})]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(y.c,{})})]})]})})},B=c(46),z=function(e){var t=e.tweet,c=e.user,n=e.id,i=Object(s.useContext)(S),a=i.useIsLiked,d=i.handleLike,o=a(c,n),j=Object(g.f)();return Object(p.jsxs)("div",{className:"tweet-detail ",children:[Object(p.jsxs)("div",{className:"tweet-header",children:[Object(p.jsx)("div",{className:"tweet-image",children:Object(p.jsx)("img",{src:t.photoURL,alt:"",height:"48px"})}),Object(p.jsxs)("div",{className:"tweet-info",onClick:function(){return j.push("/user/".concat(t.uid))},children:[Object(p.jsx)("h4",{children:t.displayName}),Object(p.jsx)("p",{children:"@".concat(t.uid)})]})]}),Object(p.jsx)("div",{className:"tweet-detail-text",children:Object(p.jsx)("p",{children:t.text})}),t.likes>0&&Object(p.jsx)("div",{className:"tweet-detail-likes",children:Object(p.jsxs)("p",{children:[t.likes," ",Object(p.jsx)("span",{children:"Me gusta"})]})}),Object(p.jsxs)("div",{className:"tweet-reactions",children:[Object(p.jsx)("div",{className:"tweet-icon",children:Object(p.jsx)(y.b,{})}),Object(p.jsx)("div",{className:"tweet-icon",children:Object(p.jsx)(r.d,{})}),Object(p.jsxs)("div",{className:"tweet-icon",onClick:function(){return d(o,n,c)},children:[o?Object(p.jsx)(r.a,{style:{color:"rgb(224,36,94)"}}):Object(p.jsx)(r.c,{}),t.likes>0&&t.likes]})]})]})},D=function(e){var t=e.tweet,c=e.id,n=e.showModal,i=e.setShowModal,a=e.setTweetComment,d=e.commentId,j=Object(s.useContext)(w).user,l=Object(s.useContext)(S),u=l.useIsLiked,b=l.handleLike,h=Object(g.f)(),x=u(j,c,d),O=Object(s.useState)(),f=Object(o.a)(O,2),v=f[0],N=f[1];return Object(s.useEffect)((function(){d||m.doc(c).collection("comments").get().then((function(e){return N(e.docs.length)}))}),[]),Object(p.jsxs)("div",{className:n?"tweet":"tweet tweet-animation",children:[Object(p.jsx)("div",{className:"tweet-image",children:Object(p.jsx)("img",{src:t.photoURL,alt:"",height:"48px",width:"48px"})}),Object(p.jsxs)("div",{className:"tweet-info",children:[Object(p.jsxs)("div",{className:"tweet-header",onClick:function(){return h.push("/user/".concat(t.uid))},children:[Object(p.jsx)("h4",{children:t.displayName}),Object(p.jsx)("p",{children:"@".concat(t.uid)})]}),Object(p.jsx)("div",{className:"tweet-text",onClick:function(){return h.push("/tweet/".concat(c))},children:t.text}),Object(p.jsxs)("div",{className:"tweet-reactions",children:[Object(p.jsxs)("div",{className:"tweet-icon",onClick:a&&function(){i(!n),a(c)},children:[Object(p.jsx)(y.b,{}),v&&v]}),Object(p.jsxs)("div",{className:"tweet-icon",children:[Object(p.jsx)(r.d,{})," ",t.retweets>0&&t.retweets]}),Object(p.jsxs)("div",{className:"tweet-icon",onClick:function(){return b(x,c,j,d)},children:[x?Object(p.jsx)(r.a,{style:{color:"rgb(224,36,94)"}}):Object(p.jsx)(r.c,{}),t.likes>0&&t.likes]})]})]})]})},F=function(){var e=Object(g.g)().id,t=Object(g.f)(),c=Object(s.useState)({}),n=Object(o.a)(c,2),i=n[0],a=n[1],r=Object(s.useState)([]),d=Object(o.a)(r,2),j=d[0],l=d[1],u=Object(s.useContext)(w).user;return Object(s.useEffect)((function(){m.onSnapshot((function(t){t.forEach((function(t){t.id===e&&a(t.data())}))})),m.doc(e).collection("comments").orderBy("createdAt").onSnapshot((function(e){var t=e.docs.map((function(e){return{data:Object(B.a)({},e.data()),id:e.id}}));l(t)}))}),[e]),Object(p.jsxs)("div",{className:"tweets-container",children:[Object(p.jsxs)("div",{className:"tweets-header",style:{justifyContent:"flex-start"},onClick:function(){return t.push("/")},children:[Object(p.jsx)(y.a,{}),Object(p.jsx)("h2",{children:"Tweet"})]}),Object(p.jsx)("div",{className:"tweet-detail-container",children:Object(p.jsx)(z,{tweet:i,user:u,id:e})}),Object(p.jsx)("div",{className:"tweet-detail-comments",children:j&&j.map((function(t){return Object(p.jsx)(D,{tweet:t.data,id:e,commentId:t.id})}))})]})},G=c(42),V=c(43),Y=c(44),q=function(e){var t=e.placeholder,c=e.button,n=e.handleSendTweet,i=e.tweetComment,a=Object(s.useContext)(S),d=a.tweet,o=a.setTweet,j=Object(s.useContext)(w).user;return Object(p.jsxs)("div",{className:"tweet-box",children:[Object(p.jsx)("div",{className:"tweet-image",children:Object(p.jsx)("img",{src:j&&j.photoURL,alt:"",height:"48px",width:"48px"})}),Object(p.jsxs)("form",{action:"",class:"send-tweet",onSubmit:function(e){return n(e,j,i)},children:[Object(p.jsx)("textarea",{type:"text",placeholder:t||"\xbfQu\xe9 est\xe1 pasando?",value:d,onChange:function(e){return o(e.target.value)}}),Object(p.jsxs)("div",{className:"tweet-footer",children:[Object(p.jsxs)("div",{className:"tweet-icons",children:[Object(p.jsx)(G.a,{}),Object(p.jsx)(r.b,{}),Object(p.jsx)(I.b,{}),Object(p.jsx)(V.a,{}),Object(p.jsx)(Y.a,{})]}),Object(p.jsx)("button",{disabled:!d,children:c||"Twittear"})]})]})]})},J=c(45),Q=function(e){var t=e.showModal,c=e.setShowModal,n=e.children,i=e.tweetComment,a=Object(s.useContext)(S).handleSendComment;return Object(p.jsxs)("div",{className:"tweet-modal",children:[Object(p.jsx)("div",{className:"tweet-modal-close",children:Object(p.jsx)(A.a,{onClick:function(){return c(!t)}})}),n,Object(p.jsx)(q,{placeholder:"Twittea tu respuesta",button:"Responder",handleSendTweet:a,tweetComment:i})]})},W=function(){var e=Object(s.useContext)(S),t=e.tweets,c=e.getAllTweets,n=e.handleSendTweet,i=Object(s.useState)(!1),a=Object(o.a)(i,2),r=a[0],d=a[1],j=Object(s.useState)(),l=Object(o.a)(j,2),u=l[0],b=l[1];return Object(s.useEffect)((function(){c()}),[]),Object(p.jsxs)("div",{className:"tweets-container",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"tweets-header",children:[Object(p.jsx)("h2",{children:"Inicio"}),Object(p.jsx)(J.a,{})]}),Object(p.jsx)(q,{handleSendTweet:n}),0===t.length?Object(p.jsx)("div",{className:"loader",children:Object(p.jsx)(T.c,{})}):t.map((function(e){return Object(p.jsx)(D,{tweet:e.data,id:e.id,showModal:r,setShowModal:d,setTweetComment:b})}))]}),r&&Object(p.jsx)(Q,{showModal:r,setShowModal:d,tweetComment:u,children:t.filter((function(e){return e.id===u})).map((function(e){return Object(p.jsx)(D,{tweet:e.data,id:e.id,showModal:r,setShowModal:d,setTweetComment:b})}))})]})};var H=function(){return Object(p.jsx)(v,{children:Object(p.jsx)(k.a,{children:Object(p.jsxs)(g.c,{children:[Object(p.jsx)(g.a,{exact:!0,path:"/login",component:N}),Object(p.jsx)("div",{className:"home",children:Object(p.jsxs)(L,{children:[Object(p.jsx)(U,{}),Object(p.jsx)(g.a,{exact:!0,path:"/",component:W}),Object(p.jsx)(g.a,{exact:!0,path:"/tweet/:id",component:F})]})})]})})})};a.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(H,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.7d36d454.chunk.js.map